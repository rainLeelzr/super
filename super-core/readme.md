```
-Xms64M -Xmx512M -XX:MetaspaceSize=64M -XX:MaxMetaspaceSize=512M -Dspring.profiles.active=dev-rain1
```

首先我们看bigint, MySQL的整型类型有这样几种：
类型      占用字节
tinyint        1
smallint     2
mediumint 3
int              4
bigint         8
这是决定存储需要占用多少字节，那么后边的数字(M)代表什么意思呢
tinyint(M), M默认为4;
SMALLINT(M), M默认为6;
MEDIUMINT(M), M默认为9;
INT(M),M默认为11;
BIGINT(M),M默认为20.

五、 MySQL 数据库
(一)建表规约
1. 【强制】表达是与否概念的字段，必须使用 xxx_flag 的方式命名，数据类型是 tinyint(1)
（1 表示是， 0 表示否） 。
正例： 表达逻辑删除的字段名 delete_flag， 1 表示删除， 0 表示未删除。
2. 【强制】表名、字段名必须使用小写字母或数字， 禁止出现数字开头，禁止两个下划线中间只
出现数字。数据库字段名的修改代价很大，因为无法进行预发布，所以字段名称需要慎重考虑。
说明： MySQL 在 Windows 下不区分大小写，但在 Linux 下默认是区分大小写。因此，数据库
名、表名、字段名，都不允许出现任何大写字母，避免节外生枝。
正例： aliyun_admin， rdc_config， level3_name
反例： AliyunAdmin， rdcConfig， level_3_name
5. 【强制】 主键索引名为 pk_字段名； 唯一索引名为 uk_字段名； 普通索引名则为 idx_字段名。
说明： pk_ 即 primary key； uk_ 即 unique key； idx_ 即 index 的简称。
6. 【强制】小数类型为 decimal，禁止使用 float 和 double。
说明： float 和 double 在存储的时候，存在精度损失的问题，很可能在值的比较时，得到不
正确的结果。如果存储的数据范围超过 decimal 的范围，建议将数据拆成整数和小数分开存储。
8. 【强制】 varchar 是可变长字符串，不预先分配存储空间，长度不要超过 5000，如果存储长
度大于此值，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索
引效率。
9. 【强制】表必备三字段： id, version， delete_flag, create_time，modify_time。
说明： 其中 id 必为主键。id, create_time, modify_time 类型均为bigint(20)。
delete_flag 类型为 tinyint(1)
version 类型为 int(11)
14.【推荐】单表行数超过 500 万行或者单表容量超过 2GB，才推荐进行分库分表。
说明： 如果预计三年后的数据量根本达不到这个级别，请不要在创建表时就分库分表。
15. 【参考】合适的字符存储长度，不但节约数据库表空间、节约索引存储，更重要的是提升检
索速度。
正例： 如下表，其中无符号值可以避免误存负数， 且扩大了表示范围。
对象 | 年龄区间 | 类型 | 字节 | 表示范围
人 | 150 | 岁之内 | tinyint|  1 | 无符号值： 0 到 255
龟 | 数百岁 | smallint | 2 | 无符号值： 0 到 65535
恐龙化石 | 数千万年 | int | 4 | 无符号值： 0 到约 42.9 亿
太阳 | 约 50 亿年 | bigint | 8 | 无符号值： 0 到约 10 的 19 次方
(二)索引规约
1. 【强制】业务上具有唯一特性的字段，即使是多个字段的组合，也必须建成唯一索引。
说明： 不要以为唯一索引影响了 insert 速度，这个速度损耗可以忽略，但提高查找速度是明
显的； 另外，即使在应用层做了非常完善的校验控制，只要没有唯一索引，根据墨菲定律，必
然有脏数据产生。
2. 【强制】超过三个表禁止 join。需要 join 的字段，数据类型必须绝对一致； 多表关联查询时，
保证被关联的字段需要有索引。
说明： 即使双表 join 也要注意表索引、 SQL 性能。
3. 【强制】在 varchar 字段上建立索引时，必须指定索引长度，没必要对全字段建立索引，根据
实际文本区分度决定索引长度即可。
说明： 索引的长度与区分度是一对矛盾体，一般对字符串类型数据，长度为 20 的索引，区分
度会高达 90%以上，可以使用 count(distinct left(列名, 索引长度))/count(*)的区分度
来确定。
(三)SQL 语句
1. 【强制】不要使用 count(列名)或 count(常量)来替代 count(*)， count(*)是 SQL92 定义的
标准统计行数的语法，跟数据库无关，跟 NULL 和非 NULL 无关。
说明： count(*)会统计值为 NULL 的行，而 count(列名)不会统计此列为 NULL 值的行。
9. 【参考】 @Transactional 事务不要滥用。事务会影响数据库的 QPS，另外使用事务的地方需
要考虑各方面的回滚方案，包括缓存回滚、搜索引擎回滚、消息补偿、统计修正
(三)服务器
4. 【推荐】 在线上生产环境， JVM 的 Xms 和 Xmx 设置一样大小的内存容量， 避免在 GC 后调整堆
大小带来的压力。

## 核心包
放置工具类、数据库连接池、缓存、网络框架等核心类，供其他服务依赖